foundation:
  resource_groups:
    - name: OPELLA-EUS-RG
      location: eastus
      is_default: true
  networks:
    opellaeusvnet:
      use_inline_subnets: true
      address_space:
        - 10.0.0.0/22
      subnets:
        azurefirewallnet:
          address_prefixes:
            - 10.0.0.0/26
          service_endpoints: []
          delegations: []
        akvpesnet:
          address_prefixes:
            - 10.0.0.64/26
          service_endpoints:
            - Microsoft.KeyVault
          delegations: []
          enforce_private_link_endpoint_network_policies: false
        sapesnet:
          address_prefixes:
            - 10.0.0.128/27
          service_endpoints:
            - Microsoft.Storage
          delegations: []
          enforce_private_link_endpoint_network_policies: false
        vmsnet:
          address_prefixes:
            - 10.0.0.160/27
          service_endpoints: []
          delegations: []
  route_tables:
    opelladevvnetudr:
      routes:
        default-route:
          address_prefix: 0.0.0.0/0
          next_hop_in_ip_address: 10.0.0.4
          next_hop_type: VirtualAppliance
      subnet_associations:
        - network: opellaeusvnet
          subnets:
            - akvpesnet
            - sapesnet
            - vmsnet
  firewalls:
    opellaeusfw:
      network: opellaeusvnet
      dns_servers: []
      network_rule_collections:
        - name: traffic_to_akv
          source_addresses:
            - 10.0.0.0/22
          destination_ports:
            - "443"
          destination_addresses:
            - 10.0.0.64/26
          destination_ip_groups: []
          protocols:
            - TCP
            - UDP
        - name: traffic_to_sa
          source_addresses:
            - 10.0.0.0/22
          destination_ports:
            - "*"
          destination_addresses:
            - 10.0.0.128/27
          destination_ip_groups: []
          protocols:
            - TCP
            - UDP
  akv:
    - key_vault_name: opellaeusdevakv
      virtual_network_name: opellaeusvnet
      vnet_resource_group_name: OPELLA-EUS-RG
    - key_vault_name: opellaeusprodakv1
      virtual_network_name: opellaeusvnet
      vnet_resource_group_name: OPELLA-EUS-RG
    - key_vault_name: opellaeusprodakv2
      virtual_network_name: opellaeusvnet
      vnet_resource_group_name: OPELLA-EUS-RG
  sas:
    opellaeussa001:
      access_tier: Hot
      account_kind: StorageV2
      account_replication_type: LRS
      account_tier: Standard
      storage_allow_blob_public_access: true
      enable_https_traffic_only: true
      storage_is_hns_enabled: true
      network_rules:
        default_action: Deny
        ip_rules:
          - 82.76.234.94
        virtual_network_subnet_ids:
          - opellaeusvnet/sapesnet
      containers:
        opellaeuscontainer001:
          container_access_type: private
        opellaeuscontainer002:
          container_access_type: blob
  dns_resources:
    privatelink.vaultcore.azure.net:
      vnet_name: opellaeusvnet
